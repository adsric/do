#!/bin/bash

# -----------------------------------------------------------------------

enable_color_support() {

	if infocmp xterm-256color &> /dev/null; then
		export TERM="xterm-256color"
	fi

	# -------------------------------------------------------------------

	# Set LS_COLORS (GNU).
	#
	#  - `ls` displays colors if the `--color` option is passed.
	#
	#  - The actual colors are configured through the `LS_COLORS`
	#    environment variable (built-in defaults are used if this
	#    variable is not set).

	LS_COLORS=""

	LS_COLORS+="no=0;39:"   # Global default
	LS_COLORS+="di=0;36:"   # Directory
	LS_COLORS+="ex=0;32:"   # Executable file
	LS_COLORS+="fi=0;39:"    # File
	LS_COLORS+="ec=:"       # Non-filename text
	LS_COLORS+="mi=1;31:"   # Non-existent file pointed to by a symlink
	LS_COLORS+="ln=target:" # Symbolic link
	LS_COLORS+="or=31;01"   # Symbolic link pointing to a non-existent file

	export LS_COLORS

	# -------------------------------------------------------------------

	# Enable color support of ls

	if [ -x /usr/bin/dircolors ]; then

		if test -r ~/.dircolors; then
			eval "$(dircolors -b ~/.dircolors)"
		fi

		alias ls='ls --color=auto'
		alias grep='grep --color=auto'
		alias fgrep='fgrep --color=auto'
		alias egrep='egrep --color=auto'

	fi

}

# -----------------------------------------------------------------------

set_prompt() {

	local cyan="[\e[0;36m\]"
	local blue="[\e[01;34m\]"


	# set variable identifying the chroot you work in (used in the prompt below)
	if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
		debian_chroot=$(cat /etc/debian_chroot)
	fi

	# Pretty Prompt
	#
	# Terminal title (Cloud)
	# [Cyan] User@Host [/Cyan]
	# [Purple] Working directory
	# [No Colour]:
	export PS1='${debian_chroot:+($debian_chroot)} ☁️ \[\e[0;36m\] \u@\h\[\e[0;36m\] \[\e[0;35m\]\W\[\033[0m\]\[\e[0m\]: '

}

# -----------------------------------------------------------------------

main() {
	enable_color_support
	set_prompt
}

main

# -----------------------------------------------------------------------

# Cleanup.

unset -f enable_color_support
unset -f main
unset -f set_prompt
